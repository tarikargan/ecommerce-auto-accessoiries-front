<!-- news-form.component.html -->
<div class="relative w-full  px-4 py-8">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">
      {{ eventType == 'edit' ? 'Modifier une actualité' : 'Créer une actualité' }}
    </h1>
    <p class="text-gray-600">
      {{ eventType == 'edit' ? ' Mettre à jour les détails de l’actualité ci-dessous' : 'Remplissez les détails pour créer une nouvelle actualité' }}
    </p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex justify-center items-center py-12">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
  </div>

  <!-- Form -->
  <form *ngIf="!loading" [formGroup]="postsHomeForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <div class="bg-white rounded-lg shadow-md p-6">

      <!-- Title Field -->
      <div class="mb-6">
        <label for="title" class="block font-play-regular text-sm text-gray-700 mb-2">
          Title <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          id="title"
          formControlName="title"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="title?.invalid && title?.touched"
          placeholder="Enter news title">

        <div *ngIf="title?.invalid && title?.touched" class="mt-1 text-sm text-red-600">
          <div *ngIf="title?.errors?.['required']">Title is required</div>
          <div *ngIf="title?.errors?.['maxlength']">Title must be less than 255 characters</div>
        </div>
      </div>

      <!-- Description Field -->
      <div class="mb-6">
        <label for="description" class="block font-play-regular text-sm text-gray-700 mb-2">
          Description <span class="text-red-500">*</span>
        </label>
        <!-- <textarea
          id="description"
          formControlName="description"
          rows="4"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="description?.invalid && description?.touched"
          placeholder="Enter news description"></textarea> -->

          <quill-editor trackChanges="all" formControlName="description" placeholder="description ..." [modules]="{ syntax: false, toolbar: myToolbar}"
                [styles]="{minHeight: '140px'}"></quill-editor>

        <div *ngIf="description?.invalid && description?.touched" class="mt-1 text-sm text-red-600">
          <div *ngIf="description?.errors?.['required']">Description is required</div>
        </div>
      </div>

      <!-- Image Upload -->
      <div class="mb-6">
        <label for="image" class="block font-play-regular text-sm text-gray-700 mb-2">
          News Image
        </label>

        <div class="grow w-full h-full">
            <app-file-upload
            (filesChange)="readFileCover($event)"
            class=" "
            [title]="'platform.upload.attachAThumbnail'"
            [(files)]="files"
            [accept]="['image','application']"
            [multiple]="true"
            [(existingFiles)]="existingFiles"
            [required]="true"
            ></app-file-upload>
         </div>
        <!-- <p class="mt-1 text-sm text-gray-500">
          Supported formats: JPEG, PNG, JPG, GIF (Max size: 2MB)
        </p> -->
      </div>

      <!-- Button Name Field -->
      <div class="mb-6">
        <label for="button_name" class="block font-play-regular text-sm text-gray-700 mb-2">
          Button Name
        </label>
        <input
          type="text"
          id="button_name"
          formControlName="button_name"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          placeholder="e.g., Read More, Learn More, View Details">
      </div>

      <!-- Button URL Field -->
      <div class="mb-6">
        <label for="button_href" class="block font-play-regular text-sm text-gray-700 mb-2">
          Button URL
        </label>
        <input
          type="url"
          id="button_href"
          formControlName="button_href"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="buttonHref?.invalid && buttonHref?.touched"
          placeholder="https://example.com">

        <div *ngIf="buttonHref?.invalid && buttonHref?.touched" class="mt-1 text-sm text-red-600">
          <div *ngIf="buttonHref?.errors?.['pattern']">Please enter a valid URL (starting with http:// or https://)</div>
        </div>
      </div>
      <div class="flex justify-end gap-2">
        <!-- <button
          type="button"
          (click)="cancel()"
          class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors duration-200">
          Cancel
        </button> -->

        <app-button-cancel  [btn_name]="'Cancel'" (click)="cancel()"></app-button-cancel>
        <app-button-success [btn_name]="loading ? 'Saving...' : ( eventType == 'edit'  ? 'Update' : 'Create')"  (click)="onSubmit()"></app-button-success>

        <!-- <button
          type="submit"
          [disabled]="postsHomeForm.invalid || loading"
          class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 "> save</button> -->
      </div>
    </div>

    <!-- Form Actions -->
  </form>
</div>
